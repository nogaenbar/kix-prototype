import{r as j,j as e}from"./radix-ui-D5-GtbOV.js";import{B as f,a as k,D as T,b as F,c as P,d as N,C as L,e as E,f as W}from"./index-TfYs_xV4.js";import{I as z}from"./input-BTMqw0vA.js";import{a as C,o as M,v as A,C as S,w as O,p as D,X as $,x as B,L as K,y as H}from"./lucide-icons-CD5RDOGz.js";import{KIXDataTableNew as U}from"./kix-data-table-new-L1DVci7S.js";import"./react-vendor-Dazix4UH.js";import"./recharts-vendor-CZXxd-7S.js";const X=[{id:"it-infra",name:"IT Infrastructure",count:486,expanded:!0,children:[{id:"it-infra-servers",name:"Servers & Hardware",count:156},{id:"it-infra-network",name:"Network Operations",count:89},{id:"it-infra-security",name:"Security",count:124},{id:"it-infra-cloud",name:"Cloud Services",count:117}]},{id:"service-desk",name:"Service Desk",count:324,expanded:!1,children:[{id:"sd-l1",name:"Level 1 Support",count:234},{id:"sd-l2",name:"Level 2 Support",count:90}]},{id:"applications",name:"Applications",count:267,expanded:!1,children:[{id:"app-erp",name:"ERP Systems",count:89},{id:"app-crm",name:"CRM Platform",count:67},{id:"app-hr",name:"HR Systems",count:45},{id:"app-finance",name:"Finance Tools",count:66}]},{id:"facilities",name:"Facilities",count:123,expanded:!1,children:[{id:"fac-hvac",name:"HVAC",count:34},{id:"fac-security",name:"Physical Security",count:23},{id:"fac-maintenance",name:"Maintenance",count:66}]},{id:"procurement",name:"Procurement",count:87,expanded:!1,children:[{id:"proc-software",name:"Software Licenses",count:45},{id:"proc-hardware",name:"Hardware Purchasing",count:42}]}];function I({node:s,level:r=0,onSelect:m,onToggleExpand:h}){const x=s.children&&s.children.length>0,p=r*16+8;return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 hover:bg-muted/50 cursor-pointer rounded-sm transition-colors ${s.selected?"bg-accent text-accent-foreground":""}`,style:{paddingLeft:`${p}px`},onClick:()=>m?.(s.id,s),children:[e.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:x?e.jsx(f,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:n=>{n.stopPropagation(),h?.(s.id)},children:s.expanded?e.jsx(S,{size:12,className:"text-muted-foreground"}):e.jsx(C,{size:12,className:"text-muted-foreground"})}):e.jsx("div",{className:"w-4 h-4"})}),r>0&&e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 pointer-events-none",children:[e.jsx("div",{className:"absolute border-l border-border",style:{left:`${(r-1)*16+16}px`,top:0,bottom:0}}),e.jsx("div",{className:"absolute border-b border-border",style:{left:`${(r-1)*16+16}px`,top:"12px",width:"8px"}})]}),e.jsxs("div",{className:"flex items-center justify-between flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:s.name}),e.jsx(k,{variant:"secondary",className:"text-xs bg-muted text-muted-foreground flex-shrink-0",children:s.count})]})]}),x&&s.expanded&&e.jsx("div",{className:"relative",children:s.children?.map(n=>e.jsx(I,{node:n,level:r+1,onSelect:m,onToggleExpand:h},n.id))})]})}function V({title:s="Teams",searchPlaceholder:r="Search teams...",data:m=X,onNodeSelect:h,onSearchChange:x,onToggleCollapse:p,isCollapsed:n=!1,className:i=""}){const[g,w]=j.useState(""),[v,b]=j.useState(m),a=t=>{w(t),x?.(t)},d=(t,o)=>{const l=u=>u.map(y=>({...y,selected:y.id===t,children:y.children?l(y.children):void 0}));b(l(v)),h?.(t,o)},c=t=>{const o=l=>l.map(u=>({...u,expanded:u.id===t?!u.expanded:u.expanded,children:u.children?o(u.children):void 0}));b(o(v))};return n?e.jsxs("div",{className:`w-12 bg-card border-r border-border h-full flex flex-col ${i}`,children:[e.jsx("div",{className:"p-2 border-b border-border",children:e.jsx(f,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:p,children:e.jsx(C,{size:16,className:"text-muted-foreground"})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground transform -rotate-90 whitespace-nowrap",children:s})})]}):e.jsxs("div",{className:`w-80 bg-card border-r border-border h-full flex flex-col ${i}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[e.jsx("h3",{className:"font-medium",children:s}),e.jsx(f,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:p,children:e.jsx(M,{size:14,className:"text-muted-foreground"})})]}),e.jsx("div",{className:"px-3 py-2 border-b border-border",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{placeholder:r,value:g,onChange:t=>a(t.target.value),className:"pl-9 h-8"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("div",{className:"p-2",children:v.map(t=>e.jsx(I,{node:t,onSelect:d,onToggleExpand:c},t.id))})})]})}const Q=[{id:"202590",subject:"Email server not responding - urgent fix needed",code:"TD-T-066",assignee:{name:"John Doe",avatar:""},team:"IT-INFRA",priority:"P1",status:"Open",date:"12/12/2024, 14:30",isNew:!1,hasAttachment:!0,isWatched:!0,isLocked:!1},{id:"202589",subject:"User account access request for new employee",code:"HR-A-024",assignee:{name:"Jane Smith",avatar:""},team:"HR-SUPPORT",priority:"P3",status:"Pending",date:"12/12/2024, 13:15",isNew:!1,hasAttachment:!1,isWatched:!1,isLocked:!1},{id:"202588",subject:"VPN connection issues affecting remote workers",code:"NET-C-089",assignee:{name:"Mike Johnson",avatar:""},team:"NETWORK",priority:"P2",status:"In Progress",date:"12/12/2024, 11:45",isNew:!1,hasAttachment:!0,isWatched:!1,isLocked:!0},{id:"202587",subject:"Software license renewal notification",assignee:{name:"Sarah Wilson",avatar:""},team:"PROCUREMENT",priority:"P4",status:"Open",date:"12/12/2024, 10:20",isNew:!1,hasAttachment:!1,isWatched:!1,isLocked:!1},{id:"202594",subject:"Printer not working in conference room A",code:"FAC-P-112",team:"FACILITIES",organization:"Acme Corp",priority:"P3",status:"New",date:"12/12/2024, 16:45",isNew:!0,hasAttachment:!1,isWatched:!1,isLocked:!1},{id:"202593",subject:"Request for additional storage space on shared drive",code:"IT-S-087",team:"IT-INFRA",organization:"Tech Solutions Ltd",priority:"P4",status:"New",date:"12/12/2024, 16:20",isNew:!0,hasAttachment:!1,isWatched:!1,isLocked:!1},{id:"202592",subject:"Database performance degradation - investigation needed",code:"DB-P-045",team:"DATABASE",organization:"DataCorp Inc",priority:"P2",status:"New",date:"12/12/2024, 15:55",isNew:!0,hasAttachment:!0,isWatched:!1,isLocked:!1},{id:"202591",subject:"Security audit compliance review",code:"SEC-A-078",assignee:{name:"Alex Chen",avatar:""},team:"SECURITY",priority:"P2",status:"Open",date:"12/12/2024, 14:00",isNew:!1,hasAttachment:!0,isWatched:!0,isLocked:!1},{id:"202595",subject:"Wi-Fi connectivity issues in building B",code:"NET-W-123",assignee:{name:"Tom Brown",avatar:""},team:"NETWORK",priority:"P3",status:"Open",date:"12/12/2024, 09:30",isNew:!1,hasAttachment:!1,isWatched:!1,isLocked:!1},{id:"202596",subject:"Monthly backup verification failed",code:"BK-V-089",assignee:{name:"Lisa Davis",avatar:""},team:"IT-INFRA",priority:"P1",status:"Critical",date:"12/12/2024, 08:15",isNew:!1,hasAttachment:!0,isWatched:!0,isLocked:!1}];function J({onFoldersClick:s,onTicketClick:r,className:m=""}){const[h,x]=j.useState(""),[p,n]=j.useState([{id:"team",label:"Team",value:"IT-INFRA"},{id:"priority",label:"Priority",value:"High"}]),i=g=>{r?.(g)};return e.jsx("div",{className:`flex-1 bg-card shadow-sm ${m}`,children:e.jsx("div",{className:"p-4 space-y-4 [&>*]:!rounded-none [&>*]:!border-none [&_*]:!rounded-none [&_*]:!border-none",children:e.jsx(U,{title:"My Open Tickets",data:Q,columns:["id","subject","assignee","team","priority","status","date","actions"],showBulkActions:!0,onRowClick:i})})})}const q=[{id:"my-folders",title:"My Folders",expanded:!0,folders:[{id:"my-urgent",name:"Urgent Tickets",count:12,icon:"folder",selected:!1},{id:"my-follow-up",name:"Follow-up Required",count:8,icon:"folder",selected:!1},{id:"my-projects",name:"Project Tickets",count:24,icon:"folder",expanded:!0,children:[{id:"proj-migration",name:"Server Migration",count:15,icon:"folder"},{id:"proj-upgrade",name:"Software Upgrade",count:9,icon:"folder"}]}]},{id:"shared-folders",title:"Shared with me",expanded:!0,folders:[{id:"shared-escalated",name:"Escalated Issues",count:6,icon:"shared",selected:!1},{id:"shared-review",name:"Pending Review",count:18,icon:"shared",selected:!1}]},{id:"team-folders",title:"Team Folders",expanded:!1,folders:[{id:"team-critical",name:"Critical Infrastructure",count:23,icon:"locked",selected:!1},{id:"team-maintenance",name:"Scheduled Maintenance",count:14,icon:"folder",selected:!1}]}];function R({folder:s,level:r=0,onSelect:m,onToggleExpand:h}){const x=s.children&&s.children.length>0,p=r*16+8,n=()=>{switch(s.icon){case"shared":return e.jsx(H,{size:14,className:"text-blue-600"});case"locked":return e.jsx(K,{size:14,className:"text-amber-600"});default:return e.jsx(B,{size:14,className:"text-muted-foreground"})}};return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 hover:bg-muted/50 cursor-pointer rounded-sm transition-colors group ${s.selected?"bg-accent text-accent-foreground":""}`,style:{paddingLeft:`${p}px`},onClick:()=>m?.(s.id,s),children:[e.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:x?e.jsx(f,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:i=>{i.stopPropagation(),h?.(s.id)},children:s.expanded?e.jsx(S,{size:12,className:"text-muted-foreground"}):e.jsx(C,{size:12,className:"text-muted-foreground"})}):e.jsx("div",{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-shrink-0",children:n()}),e.jsxs("div",{className:"flex items-center justify-between flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{variant:"secondary",className:"text-xs bg-muted text-muted-foreground",children:s.count}),e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:i=>i.stopPropagation(),children:e.jsx(D,{size:12})})}),e.jsxs(P,{align:"end",children:[e.jsx(N,{children:"Rename"}),e.jsx(N,{children:"Move"}),e.jsx(N,{children:"Share"}),e.jsx(N,{className:"text-destructive",children:"Delete"})]})]})]})]})]}),x&&s.expanded&&e.jsx("div",{children:s.children?.map(i=>e.jsx(R,{folder:i,level:r+1,onSelect:m,onToggleExpand:h},i.id))})]})}function _({isOpen:s=!1,onClose:r,onFolderSelect:m,className:h=""}){const[x,p]=j.useState(""),[n,i]=j.useState(q),g=a=>{p(a)},w=(a,d)=>{const c=o=>o.map(l=>({...l,folders:t(l.folders,a)})),t=(o,l)=>o.map(u=>({...u,selected:u.id===l,children:u.children?t(u.children,l):void 0}));i(c(n)),m?.(a,d)},v=a=>{const d=t=>t.map(o=>({...o,folders:c(o.folders,a)})),c=(t,o)=>t.map(l=>({...l,expanded:l.id===o?!l.expanded:l.expanded,children:l.children?c(l.children,o):void 0}));i(d(n))},b=a=>{i(d=>d.map(c=>({...c,expanded:c.id===a?!c.expanded:c.expanded})))};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:r}),e.jsxs("div",{className:`fixed right-0 top-0 h-full w-96 bg-card border-l border-border shadow-popover z-50 flex flex-col ${h}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[e.jsx("h3",{className:"font-medium",children:"Folders"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{variant:"ghost",size:"icon",className:"w-8 h-8",children:e.jsx(O,{size:16})}),e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"w-8 h-8",children:e.jsx(D,{size:16})})}),e.jsxs(P,{align:"end",children:[e.jsx(N,{children:"New Folder"}),e.jsx(N,{children:"Import Folders"}),e.jsx(N,{children:"Export Folders"})]})]}),e.jsx(f,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:r,children:e.jsx($,{size:16})})]})]}),e.jsx("div",{className:"px-4 py-3 border-b border-border",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{placeholder:"Search folders...",value:x,onChange:a=>g(a.target.value),className:"pl-9 h-8"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("div",{className:"p-2",children:n.map(a=>e.jsx("div",{className:"mb-4",children:e.jsxs(L,{open:a.expanded,onOpenChange:()=>b(a.id),children:[e.jsx(E,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"w-full justify-start p-2 h-auto font-medium text-muted-foreground hover:text-foreground",children:[a.expanded?e.jsx(S,{size:14,className:"mr-2"}):e.jsx(C,{size:14,className:"mr-2"}),a.title]})}),e.jsx(W,{className:"space-y-1",children:a.folders.map(d=>e.jsx(R,{folder:d,onSelect:w,onToggleExpand:v},d.id))})]})},a.id))})})]})]}):null}function re({onTicketClick:s,onFilterApply:r,className:m=""}){const[h,x]=j.useState(!1),[p,n]=j.useState(!1),i=()=>{x(!h)},g=()=>{n(!0)},w=()=>{n(!1)},v=(d,c)=>{console.log("Filter node selected:",d,c),r?.(d,c)},b=(d,c)=>{console.log("Folder selected:",d,c),n(!1)},a=d=>{s?.(d)};return e.jsxs("div",{className:`flex h-full w-full ${m}`,children:[e.jsx(V,{title:"Teams",searchPlaceholder:"Search teams...",onNodeSelect:v,onToggleCollapse:i,isCollapsed:h}),e.jsx("div",{className:"flex-1 h-full",children:e.jsx(J,{onFoldersClick:g,onTicketClick:a})}),e.jsx(_,{isOpen:p,onClose:w,onFolderSelect:b})]})}export{re as KIXTicketsLayout};
